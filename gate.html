<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Faizal Ramadhan | Product Designer & Business Analyst</title>

		<script src="https://cdn.jsdelivr.net/npm/gsap@3.14.1/dist/gsap.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/gsap@3.14.1/dist/ScrollTrigger.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

		<style>
			@font-face {
				font-family: "Editorial";
				src: url("./assets/fonts/PPEditorialNew-Regular.otf") format("opentype");
				font-weight: normal;
				font-style: normal;
				font-display: swap;
			}

			@font-face {
				font-family: "Montreal";
				src: url("./assets/fonts/PPNeueMontreal-Book.otf") format("opentype");
				font-weight: normal;
				font-style: normal;
				font-display: swap;
			}

			.text-editorial {
				font-family: "Editorial";
			}

			.text-montreal {
				font-family: "Montreal";
			}

			body {
				background-color: #05050b;
				letter-spacing: -0.02em;
			}

			.space-bg {
				position: fixed;
				inset: 0;
				z-index: -1;
				overflow: hidden;
			}

			canvas {
				position: absolute;
				inset: 0;
			}
		</style>
	</head>

	<body>
		<div class="preloader flex flex-row absolute top-0">
			<div id="preloader-bar-1" class="preloader-bar bg-[#96001B] w-[20vw] h-[100vh]"></div>
			<div id="preloader-bar-2" class="preloader-bar bg-[#96001B] w-[20vw] h-[100vh]"></div>
			<div id="preloader-bar-3" class="preloader-bar bg-[#96001B] w-[20vw] h-[100vh]"></div>
			<div id="preloader-bar-4" class="preloader-bar bg-[#96001B] w-[20vw] h-[100vh]"></div>
			<div id="preloader-bar-5" class="preloader-bar bg-[#96001B] w-[20vw] h-[100vh]"></div>
		</div>

		<div class="galaxy-wrapper">
			<div class="space-bg">
				<canvas id="space"></canvas>
			</div>

			<div class="hero h-screen flex flex-col items-center justify-center gap-4 text-montreal">
				<h1 class="text-5xl text-white text-editorial select-none">
					What's The Magic Word?
				</h1>

				<input
					id="magic-spell"
					class="outline-0 bg-white text-md border-1 px-[0.75rem] py-[0.5rem] rounded-full w-[20vw] uppercase font-semibold text-dark focus:outline-2 focus:outline-rose-500"
				/>

				<button
					id="magic-button"
					class="px-[1rem] py-[0.875rem] rounded-full bg-neutral-800 text-white font-semibold select-none hover:bg-neutral-900 hover:cursor-pointer active:bg-neutral-800 active:outline-2 active:outline-rose-500"
				>
					Try The Magic Word
				</button>
			</div>
		</div>

		<script>
			gsap.registerPlugin(ScrollTrigger);
			gsap.set(".galaxy-wrapper", { opacity: 0 });

			function isMobileDevice() {
				return (
					/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
					window.matchMedia("(pointer: coarse)").matches ||
					window.innerWidth < 1024
				);
			}

			if (isMobileDevice()) {
				document.body.innerHTML = `
					<div style="min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:2rem;font-family:system-ui,sans-serif;background:#0f0f0f;color:white;">
						<div>
							<h1 style="font-size:2rem;margin-bottom:1rem;">Desktop Experience Only</h1>
							<p style="opacity:.7;max-width:420px;margin:0 auto;">
								This experience is crafted for desktop.
								Please open it on a laptop or desktop device.
							</p>
						</div>
					</div>
				`;
				throw new Error("Blocked mobile devices");
			}

			function playPreloaderReveal() {
				const tl = gsap.timeline();

				tl.set([
					"#preloader-bar-1",
					"#preloader-bar-2",
					"#preloader-bar-3",
					"#preloader-bar-4",
					"#preloader-bar-5"
				], { height: "100vh" });

				tl.to("#preloader-bar-1", { height: 0, duration: .8, ease: "expo.inOut" });
				tl.to("#preloader-bar-2", { height: 0, duration: .8, ease: "expo.inOut" }, .1);
				tl.to("#preloader-bar-3", { height: 0, duration: .8, ease: "expo.inOut" }, .2);
				tl.to("#preloader-bar-4", { height: 0, duration: .8, ease: "expo.inOut" }, .3);
				tl.to("#preloader-bar-5", { height: 0, duration: .8, ease: "expo.inOut" }, .4);

				tl.to(".galaxy-wrapper", { opacity: 1, duration: .8, ease: "sine.in" });
			}

			function playPostloadExit(callback) {
				const tl = gsap.timeline({
					onComplete: callback
				});

				tl.to("#preloader-bar-1", { height: "100vh", duration: .8, ease: "expo.inOut" });
				tl.to("#preloader-bar-2", { height: "100vh", duration: .8, ease: "expo.inOut" }, .1);
				tl.to("#preloader-bar-3", { height: "100vh", duration: .8, ease: "expo.inOut" }, .2);
				tl.to("#preloader-bar-4", { height: "100vh", duration: .8, ease: "expo.inOut" }, .3);
				tl.to("#preloader-bar-5", { height: "100vh", duration: .8, ease: "expo.inOut" }, .4);
			}

			window.addEventListener("load", playPreloaderReveal);

			window.addEventListener("pageshow", (event) => {
				if (event.persisted) playPreloaderReveal();
			});

			const generateHash = (string) => {
				let hash = 0;
				for (const char of string) {
					hash = (hash << 5) - hash + char.charCodeAt(0);
					hash |= 0;
				}
				return hash;
			};

			document.getElementById("magic-button").addEventListener("click", () => {
				const value = document.getElementById("magic-spell").value.trim().toLowerCase();

				if (!value) {
					alert("Say the magic word first.");
					return;
				}

				if (generateHash(value) === 3208415) {
					playPostloadExit(() => {
						setTimeout(() => {
							window.location.assign("./index.html");
						}, 300);
					});
				}

				if (generateHash(value) === -1162277419) {
					window.open("./val-26.html", "_blank");
				}

				if (generateHash(value) === -664623476) {
					alert("Gelo");
				}
			});

			/* Canvas galaxy (unchanged) */
			const canvas = document.getElementById("space");
			const ctx = canvas.getContext("2d");

			let w, h, cx, cy;

			function resize() {
				w = canvas.width = window.innerWidth;
				h = canvas.height = window.innerHeight;
				cx = w / 2;
				cy = h / 2;
			}

			window.addEventListener("resize", resize);
			resize();

			const galaxy = { glow: 1 };
			const galaxyStars = [];
			const ambientStars = [];

			const GALAXY_STAR_COUNT = 999;
			const AMBIENT_STAR_COUNT = 512;

			for (let i = 0; i < GALAXY_STAR_COUNT; i++) {
				const r = Math.pow(Math.random(), 1.7);
				const arm = i % 4;
				const baseAngle = r * 7 + arm * (Math.PI * 2 / 4);

				galaxyStars.push({
					r,
					angle: baseAngle,
					orbitSpeed: 0.0002,
					size: Math.random() * 1.8 + 0.6,
					alpha: 1 - r,
					twinkle: Math.random() * Math.PI * 2,
					color: ["#ffd6d6", "#ff9b9b", "#c85a5a", "#ffb3b3"][Math.floor(Math.random() * 4)]
				});
			}

			for (let i = 0; i < AMBIENT_STAR_COUNT; i++) {
				ambientStars.push({
					x: Math.random() * w,
					y: Math.random() * h,
					size: Math.random() * 1.5 + 0.5,
					alpha: Math.random() * 0.8 + 0.2,
					twinkle: Math.random() * Math.PI * 2
				});
			}

			function drawGalaxy() {
				ctx.save();
				ctx.translate(cx, cy);

				const grd = ctx.createRadialGradient(0, 0, 0, 0, 0, 340);
				grd.addColorStop(0, `rgba(160, 40, 60, ${0.95 * galaxy.glow})`);
				grd.addColorStop(0.35, `rgba(120, 30, 50, ${0.6 * galaxy.glow})`);
				grd.addColorStop(0.65, `rgba(80, 20, 35, ${0.35 * galaxy.glow})`);
				grd.addColorStop(1, "transparent");

				ctx.fillStyle = grd;
				ctx.beginPath();
				ctx.arc(0, 0, 320, 0, Math.PI * 2);
				ctx.fill();

				galaxyStars.forEach((s) => {
					s.angle += s.orbitSpeed;
					const x = Math.cos(s.angle) * s.r * 540;
					const y = Math.sin(s.angle) * s.r * 260;

					ctx.globalAlpha = s.alpha * (0.6 + Math.sin(s.twinkle) * 0.4);
					ctx.fillStyle = s.color;
					ctx.beginPath();
					ctx.arc(x, y, s.size, 0, Math.PI * 2);
					ctx.fill();
				});

				ctx.restore();
			}

			function drawAmbientStars() {
				ambientStars.forEach((s) => {
					ctx.globalAlpha = s.alpha * (0.5 + Math.sin(s.twinkle) * 0.5);
					ctx.fillStyle = "#ffffff";
					ctx.beginPath();
					ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
					ctx.fill();
				});
			}

			function render() {
				ctx.clearRect(0, 0, w, h);
				drawAmbientStars();
				drawGalaxy();

				galaxyStars.forEach((s) => (s.twinkle += 0.02));
				ambientStars.forEach((s) => (s.twinkle += 0.01));

				requestAnimationFrame(render);
			}

			render();

			gsap.to(galaxy, {
				glow: 1.25,
				duration: 10,
				yoyo: true,
				repeat: -1,
				ease: "sine.inOut"
			});
		</script>
	</body>
</html>
